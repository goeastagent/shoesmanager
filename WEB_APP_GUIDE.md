# 웹 애플리케이션 실행 가이드

## 개요

물류 관리 시스템의 웹 버전입니다. 기존 GUI(Tkinter) 애플리케이션과 동일한 기능을 웹 인터페이스로 제공합니다.

## 필요 패키지 설치

```bash
# 가상환경 활성화
source venv/bin/activate  # macOS/Linux
# 또는
venv\Scripts\activate  # Windows

# 필요한 패키지 설치
pip install fastapi uvicorn jinja2
```

또는 requirements.txt를 이용하여 모든 패키지 설치:

```bash
pip install -r requirements.txt
```

## 실행 방법

### 방법 1: 직접 실행 (권장)

```bash
python -m app.ui.web_app
```

### 방법 2: uvicorn으로 실행

```bash
uvicorn app.ui.web_app:app --host 0.0.0.0 --port 8000 --reload
```

## 접속 방법

웹 브라우저에서 다음 주소로 접속:

- **로컬**: http://localhost:8000
- **네트워크**: http://[서버IP]:8000

## 주요 기능

### 1. 재고 검색
- **검색 조건**: 키워드, 위치, 구매처, 모델명, 제품명, 사이즈, 바코드, 날짜 범위, 가격 범위
- **정렬**: 각 컬럼 헤더 클릭으로 정렬 (오름차순/내림차순 토글)
- **페이징**: 페이지당 50개 항목씩 표시

### 2. 재고 관리
- **새 항목 추가**: "새 항목" 버튼 클릭
  - 바코드 입력 시 자동완성 기능 (기존 바코드 정보 자동 로드)
- **항목 수정**: 목록에서 항목 선택 후 "수정" 버튼 클릭
- **항목 삭제**: 목록에서 항목 선택 후 "삭제" 버튼 클릭

### 3. 판매 처리
- **"판매" 버튼** 클릭하여 판매 모달 열기
- **바코드 스캐너** 또는 수동으로 바코드 입력
- **자동 처리**:
  - 재고 1개: 즉시 판매 처리
  - 재고 여러 개: 선택 화면 표시

### 4. 상세 정보
- 목록에서 항목 클릭 시 오른쪽 패널에 상세 정보 표시
- 모바일/태블릿: 상세 정보가 목록 아래에 표시

## 바코드 스캐너 사용

바코드 스캐너는 일반적으로 Enter 키를 자동으로 입력합니다:

1. **항목 추가 시**:
   - "새 항목" 버튼 클릭
   - 바코드 필드에 포커스가 자동으로 이동
   - 바코드 스캔하면 자동으로 기존 정보가 채워짐 (있는 경우)

2. **판매 처리 시**:
   - "판매" 버튼 클릭
   - 바코드 필드에 포커스가 자동으로 이동
   - 바코드 스캔하면 자동으로 검색
   - 재고가 1개면 즉시 판매, 여러 개면 선택

## 반응형 디자인

웹 애플리케이션은 다양한 화면 크기에 최적화되어 있습니다:

- **데스크톱** (1200px 이상): 전체 기능 표시
- **태블릿** (768px ~ 1199px): 일부 컬럼 숨김, 조정된 레이아웃
- **모바일** (767px 이하): 모바일 최적화 레이아웃

## 기술 스택

- **백엔드**: FastAPI
- **프론트엔드**: Bootstrap 5, jQuery
- **UI 컴포넌트**: Bootstrap Datepicker, Bootstrap Icons
- **데이터베이스**: SQLite (SQLAlchemy ORM)

## 디렉토리 구조

```
app/ui/
├── web_app.py          # FastAPI 애플리케이션
├── templates/
│   └── index.html      # 메인 HTML 템플릿
└── static/
    ├── css/
    │   └── style.css   # 커스텀 CSS
    └── js/
        └── app.js      # 프론트엔드 로직
```

## API 엔드포인트

### 재고 관리
- `GET /api/items` - 재고 항목 검색 (페이징, 정렬, 필터 지원)
- `GET /api/items/{item_id}` - 특정 항목 조회
- `POST /api/items` - 새 항목 추가
- `PUT /api/items/{item_id}` - 항목 수정
- `DELETE /api/items/{item_id}` - 항목 삭제

### 판매 처리
- `POST /api/items/{item_id}/sell` - 항목 판매 처리
- `GET /api/items/barcode/{barcode}` - 바코드로 재고 조회

### 보조 기능
- `GET /api/barcode-info/{barcode}` - 바코드 정보 조회 (자동완성용)
- `GET /api/filters` - 필터 옵션 조회 (위치, 구매처 목록)

## 문제 해결

### 포트 충돌
포트 8000이 이미 사용 중인 경우:

```bash
# 다른 포트 사용 (예: 8080)
uvicorn app.ui.web_app:app --host 0.0.0.0 --port 8080
```

### 데이터베이스 연결 실패
데이터베이스가 초기화되지 않은 경우:

```bash
python init_database.py
# 또는
python init_database_safe.py
```

### 정적 파일 로드 실패
브라우저 콘솔에서 404 오류 확인:
- 경로가 올바른지 확인
- static 디렉토리가 올바른 위치에 있는지 확인

## 보안 주의사항

현재 버전은 **로컬 사용**을 위해 설계되었습니다:

- 세션 관리 없음
- 계정/인증 없음
- 모든 사용자가 모든 기능에 접근 가능

외부 네트워크에 노출할 경우 추가 보안 조치가 필요합니다.

## GUI vs 웹 버전 비교

| 기능 | GUI (Tkinter) | 웹 버전 |
|------|--------------|---------|
| 재고 검색 | ✅ | ✅ |
| 항목 추가/수정/삭제 | ✅ | ✅ |
| 바코드 판매 | ✅ | ✅ |
| 바코드 자동완성 | ✅ | ✅ |
| 컬럼별 정렬 | ✅ | ✅ |
| 상세 정보 표시 | ✅ | ✅ |
| CSV 가져오기/내보내기 | ✅ | ❌ (제외) |
| HTML 보고서 | ✅ | ❌ (제외) |
| 통계 | ✅ | ❌ (제외) |
| 페이징 | ❌ | ✅ (50개/페이지) |
| 반응형 디자인 | ❌ | ✅ |
| 원격 접속 | ❌ | ✅ |

## 개발 모드

개발 시 자동 재시작 기능:

```bash
uvicorn app.ui.web_app:app --reload
```

코드 변경 시 자동으로 서버가 재시작됩니다.

